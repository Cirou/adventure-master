<div class="hero">
  <div class="hero-content">
    <h1>Richiesta Account</h1>
    <p>Inizia la tua avventura su Adventure Master - Richiedi il tuo account.</p>
  </div>
</div>

<section class="lore-section">
  <h2 *ngIf="!showSuccessMessage">‚öîÔ∏è Benvenuto su Adventure Master</h2>
  
  <!-- Success Message -->
  <div class="success-message" *ngIf="showSuccessMessage">
    <h3>‚úÖ Richiesta Inviata con Successo!</h3>
    <p>La tua richiesta di account √® stata ricevuta. Ti contatteremo presto all'indirizzo email fornito.</p>
  </div>

  <p *ngIf="!showSuccessMessage">
    Tieni a mente che Adventure Master √® un gioco di ruolo immersivo.
    Dopo il login sarai su Sosaria e parlerai coerentemente con la storia che hai scelto per il tuo personaggio, sulla base del bg del gioco. Che tu sia un giocatore che ha provato molte versioni di Ultima Online, o che arrivi qui dopo una lunga storia di giochi testuali, ricorda sempre questo: il gioco si basa sulla comprensione delle meccaniche di Ultima Online e sulla capacit√† di interpretare un personaggio in questo contesto ruolistico. Entrambe le abilit√† sono importanti per giocare con noi.
  </p>

  <form class="account-form" action="https://formsubmit.co/adventuremasteruo@gmail.com" method="POST" *ngIf="!showSuccessMessage" (submit)="onSubmit($event)" #accountForm>
    <!-- FormSubmit Configuration -->
    <input type="hidden" name="_next" value="https://adventure-master.onrender.com/account?submitted=true">
    <input type="hidden" name="_subject" value="Nuova Richiesta Account - Adventure Master">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_template" value="basic">
    <input type="text" name="_honey" style="display:none">
    
    <!-- Required Fields Notice -->
    <div class="form-notice">
      <p><strong>Nota:</strong> Tutti i campi sono obbligatori per poter inviare la richiesta.</p>
    </div>
    
    <!-- Loading Message -->
    <div class="loading-message" *ngIf="isSubmitting">
      <p>‚è≥ Invio in corso...</p>
    </div>
    
    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" required placeholder="tua.email@esempio.com" [disabled]="isSubmitting" [(ngModel)]="formData.email">
    </div>

    <div class="form-group">
      <label for="account">Nome Account</label>
      <input type="text" id="account" name="account" required [disabled]="isSubmitting" [(ngModel)]="formData.account">
    </div>

    <div class="form-group">
      <label for="character">Nome Personaggio</label>
      <input type="text" id="character" name="character" required [disabled]="isSubmitting" [(ngModel)]="formData.character">
    </div>

    <div class="form-group">
      <label for="characterClass">Classe del Personaggio</label>
      <select id="characterClass" name="characterClass" required [disabled]="isSubmitting" [(ngModel)]="formData.characterClass">
        <option value="">Seleziona una classe...</option>
        <option *ngFor="let class of characterClasses" [value]="class.value">
          {{ class.label }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="lineage">Stirpe</label>
      <select id="lineage" name="lineage" required [disabled]="isSubmitting" [(ngModel)]="formData.lineage">
        <option value="">Seleziona una stirpe...</option>
        <option *ngFor="let lineage of lineages" [value]="lineage.value">
          {{ lineage.label }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="background">
        Background del Personaggio
        <button type="button" class="help-button" (click)="showBgHelp = true" title="Come compilare il background">
          ‚ùì
        </button>
      </label>
      <textarea 
        id="background" 
        name="background" 
        required 
        [disabled]="isSubmitting"
        placeholder="Racconta la storia del tuo personaggio: le sue origini, il suo passato, le sue motivazioni, i suoi obiettivi... Sii creativo e coerente con l'ambientazione di Sosaria!"
        rows="8"
        [(ngModel)]="formData.background"></textarea>
    </div>

    <button type="submit" class="cta-button" [disabled]="isSubmitting || !isFormValid">
      {{ isSubmitting ? 'Invio...' : (!isFormValid ? 'Completa tutti i campi' : 'Invia Richiesta') }}
    </button>
  </form>
</section>

<!-- Background Help Modal -->
<div class="modal-overlay" *ngIf="showBgHelp" (click)="showBgHelp = false">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="showBgHelp = false">‚úï</button>
    <h3>üìú Come compilare il Background</h3>
    <div class="help-content">
      <p>Per creare un background completo ed efficace, assicurati di includere i seguenti elementi:</p>
      
      <div class="help-section">
        <h4>üé≠ Descrizione Fisica</h4>
        <p>Descrivi l'aspetto del tuo personaggio: altezza, corporatura, colore dei capelli e degli occhi, segni particolari, abbigliamento preferito, etc.</p>
      </div>

      <div class="help-section">
        <h4>‚öñÔ∏è Morale (Allineamento)</h4>
        <p>Definisci l'allineamento morale del tuo personaggio: √® buono, neutrale o malvagio? √à legale, caotico o neutrale? Come si comporta con gli altri?</p>
      </div>

      <div class="help-section">
        <h4>‚öîÔ∏è Vocazione</h4>
        <p>Spiega come ha scelto la propria classe o ha avuto la sua vocazione: √® nato con questo talento? Ha avuto un maestro? Un evento particolare lo ha spinto su questa strada?</p>
      </div>

      <div class="help-section">
        <h4>üó∫Ô∏è Origini</h4>
        <p>√à nato a Clover? O √® nato all'esterno? Se viene da fuori, com'√® giunto a Clover? Cosa lo ha spinto a viaggiare?</p>
      </div>

      <div class="help-section">
        <h4>üìñ Storia Generale</h4>
        <p>Racconta la storia del tuo personaggio: eventi importanti della sua vita, persone significative, obiettivi e motivazioni. Cosa lo spinge ad avventurarsi? Quali sono i suoi sogni e le sue paure?</p>
      </div>

      <div class="help-footer">
        <p><strong>Ricorda:</strong> Sii creativo ma coerente con l'ambientazione di Sosaria e Adventure Master!</p>
      </div>
    </div>
    <button class="cta-button" (click)="showBgHelp = false">Ho capito!</button>
  </div>
</div>

<div class="final-cta">
  <h2>Ecco qualche consiglio per giocare su Adventure Master</h2>
  <p>Prima di iniziare, ti consigliamo di leggere la nostra guida per i primi passi.</p>
  <button class="cta-button" routerLink="/primipassi">Vai ai Primi Passi</button>
</div>
